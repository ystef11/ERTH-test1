CREATE DATABASE IF NOT EXISTS `sbp`;

SET GLOBAL autocommit = 'Off';

CREATE USER 'admin'@'%' IDENTIFIED BY 'admin';
GRANT CREATE, ALTER, INDEX, LOCK TABLES, REFERENCES, UPDATE, DELETE, DROP, SELECT, INSERT ON `sbp`.* TO 'admin'@'%';

FLUSH PRIVILEGES;

CREATE TABLE `sbp`.`payments` (`qrcId` VARCHAR(100) NOT NULL,
     `status` VARCHAR(10) NOT NULL,
     `trxId` VARCHAR(100) NULL,
     `kzo` VARCHAR(300) NULL ,
     `queue` INT NULL,
     `ts` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
     PRIMARY KEY (`qrcId`)
) ENGINE = InnoDB;

CREATE INDEX payments_status ON `sbp`.`payments` (status,queue);

CREATE TABLE `sbp`.`queue_node` (`node_id` INT NOT NULL AUTO_INCREMENT,
    `ts` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`node_id`)
) ENGINE = InnoDB; 

insert into `sbp`.`payments` (qrcId,status) values 
("AD1000670LSS7DN18SJQDNP4B05KLJ01",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ02",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ03",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ04",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ05",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ06",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ07",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ08",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ09",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ10",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ11",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ12",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ13",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ14",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ15",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ16",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ17",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ18",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ19",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ20",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ21",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ22",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ23",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ24",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ25",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ26",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ27",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ28",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ29",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ30",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ31",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ32",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ33",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ34",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ35",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ36",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ37",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ38",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ39",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ40",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ41",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ42",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ43",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ44",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ45",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ46",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ47",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ48",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ49",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ50",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ51",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ52",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ53",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ54",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ55",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ56",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ57",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ58",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ59",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ60",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ61",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ62",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ63",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ64",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ65",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ66",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ67",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ68",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ69",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ70",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ71",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ72",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ73",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ74",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ75",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ76",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ77",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ78",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ79",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ80",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ81",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ82",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ83",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ84",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ85",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ86",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ87",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ88",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ89",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ90",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ91",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ92",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ93",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ94",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ95",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ96",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ97",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ98",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ99",'ERROR'),
("AD1000670LSS7DN18SJQDNP4B05KLJ00",'ERROR');